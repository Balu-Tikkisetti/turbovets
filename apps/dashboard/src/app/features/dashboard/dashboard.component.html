<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* This section is removed and now lives in dashboard.component.scss */
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <app-create-task-modal [visible]="isModalVisible" (formClose)="onModalClose()"></app-create-task-modal>
    <div class="flex h-screen overflow-hidden">
        <aside class="w-72 bg-white dark:bg-gray-800 shadow-xl sidebar-transition" id="sidebar">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                <div class="flex items-center space-x-3">
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face" 
                             alt="Profile" class="w-10 h-10 rounded-full">
                        <div class="absolute -bottom-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white dark:border-gray-800"></div>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-semibold text-gray-900 dark:text-white">{{ (currentUser$ | async)?.username }}</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Admin</p>
                    </div>
                    <button class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                        <i data-lucide="settings" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
            <nav class="p-4 custom-scrollbar overflow-y-auto flex-1">
                <div class="space-y-2">
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300">
                        <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                        <span class="font-medium">Dashboard</span>
                    </a>
                    <div class="space-y-1">
                        <button class="w-full flex items-center justify-between p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            <div class="flex items-center space-x-3">
                                <i data-lucide="check-square" class="w-5 h-5"></i>
                                <span>Tasks</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">12</span>
                                <i data-lucide="chevron-down" class="w-4 h-4"></i>
                            </div>
                        </button>
                        <div class="ml-8 space-y-1">
                            <a href="#" class="block p-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">My Tasks</a>
                            <a href="#" class="block p-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">Assigned to Me</a>
                            <a href="#" class="block p-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">Team Tasks</a>
                        </div>
                    </div>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i data-lucide="folder" class="w-5 h-5"></i>
                        <span>Projects</span>
                        <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full ml-auto">5</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i data-lucide="calendar" class="w-5 h-5"></i>
                        <span>Calendar</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                        <span>Analytics</span>
                        <div class="w-2 h-2 bg-red-500 rounded-full ml-auto notification-dot"></div>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <i data-lucide="users" class="w-5 h-5"></i>
                        <span>Team</span>
                    </a>
                </div>
                <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
                    <h3 class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3">Organization</h3>
                    <div class="space-y-2">
                        <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            <i data-lucide="building" class="w-5 h-5"></i>
                            <span>Departments</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            <i data-lucide="shield-check" class="w-5 h-5"></i>
                            <span>Permissions</span>
                        </a>
                        <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            <i data-lucide="file-text" class="w-5 h-5"></i>
                            <span>Audit Logs</span>
                        </a>
                    </div>
                </div>
            </nav>
        </aside>
        <div class="flex-1 flex flex-col overflow-hidden">
            <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
                <div class="px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <button id="sidebarToggle" class="lg:hidden text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                                <i data-lucide="menu" class="w-6 h-6"></i>
                            </button>
                        </div>
                        <div class="flex-1 max-w-lg mx-auto md:block">
                            <div class="relative w-full">
                                <input type="text" placeholder="Search tasks, projects..."
                                       class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white">
                                <i data-lucide="search" class="absolute left-3 top-2.5 w-5 h-5 text-gray-400"></i>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <div class="relative">
                                <button class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors">
                                    <i data-lucide="bell" class="w-5 h-5"></i>
                                </button>
                                <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full notification-dot"></div>
                            </div>
                            <button id="darkModeToggle" class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors">
                                <i data-lucide="moon" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </header>
            <main class="flex-1 overflow-y-auto custom-scrollbar bg-gray-50 dark:bg-gray-900">
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="glass rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Tasks</p>
                                    <p class="text-3xl font-bold text-gray-900 dark:text-white">124</p>
                                    <p class="text-sm text-green-600 dark:text-green-400 flex items-center mt-1">
                                        <i data-lucide="trending-up" class="w-4 h-4 mr-1"></i>
                                        +12% from last week
                                    </p>
                                </div>
                                <div class="w-12 h-12 gradient-primary rounded-lg flex items-center justify-center">
                                    <i data-lucide="check-square" class="text-white w-6 h-6"></i>
                                </div>
                            </div>
                        </div>
                        <div class="glass rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">In Progress</p>
                                    <p class="text-3xl font-bold text-gray-900 dark:text-white">45</p>
                                    <p class="text-sm text-blue-600 dark:text-blue-400 flex items-center mt-1">
                                        <i data-lucide="clock" class="w-4 h-4 mr-1"></i>
                                        8 due today
                                    </p>
                                </div>
                                <div class="w-12 h-12 gradient-secondary rounded-lg flex items-center justify-center">
                                    <i data-lucide="clock" class="text-white w-6 h-6"></i>
                                </div>
                            </div>
                        </div>
                        <div class="glass rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Completed</p>
                                    <p class="text-3xl font-bold text-gray-900 dark:text-white">78</p>
                                    <p class="text-sm text-green-600 dark:text-green-400 flex items-center mt-1">
                                        <i data-lucide="check-circle" class="w-4 h-4 mr-1"></i>
                                        +5 today
                                    </p>
                                </div>
                                <div class="w-12 h-12 gradient-success rounded-lg flex items-center justify-center">
                                    <i data-lucide="check-circle" class="text-white w-6 h-6"></i>
                                </div>
                            </div>
                        </div>
                        <div class="glass rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Team Members</p>
                                    <p class="text-3xl font-bold text-gray-900 dark:text-white">24</p>
                                    <p class="text-sm text-purple-600 dark:text-purple-400 flex items-center mt-1">
                                        <i data-lucide="users" class="w-4 h-4 mr-1"></i>
                                        3 online now
                                    </p>
                                </div>
                                <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center">
                                    <i data-lucide="users" class="text-white w-6 h-6"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2">
                            <div class="glass rounded-xl p-6">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Task Overview</h3>
                                    <div class="flex space-x-2">
                                        <button class="px-3 py-1 text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 rounded-md">Week</button>
                                        <button class="px-3 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md">Month</button>
                                        <button class="px-3 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md">Year</button>
                                    </div>
                                </div>
                                <div class="h-64 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-lg">
                                    <div class="text-center">
                                        <i data-lucide="bar-chart-3" class="w-12 h-12 text-gray-400 mx-auto mb-2"></i>
                                        <p class="text-gray-500 dark:text-gray-400">Chart component will be rendered here</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="glass rounded-xl p-6">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-6">Recent Activity</h3>
                            <div class="space-y-4">
                                <div class="flex items-start space-x-3">
                                    <div class="w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i data-lucide="check" class="w-4 h-4 text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-900 dark:text-white font-medium">Task "API Integration" completed</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">2 minutes ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3">
                                    <div class="w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i data-lucide="plus" class="w-4 h-4 text-green-600 dark:text-green-400"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-900 dark:text-white font-medium">New task "Database Migration" created</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">15 minutes ago</p>
                                    </div>
                                </div>
                                <div class="flex items-start space-x-3">
                                    <div class="w-8 h-8 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i data-lucide="user-plus" class="w-4 h-4 text-purple-600 dark:text-purple-400"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-900 dark:text-white font-medium">Sarah joined the project</p>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">1 hour ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8 glass rounded-xl p-6">
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <button (click)="onNewTaskClick()" class="flex items-center justify-center space-x-2 p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors">
                                <i data-lucide="plus-circle" class="w-5 h-5 text-blue-600 dark:text-blue-400"></i>
                                <span class="text-sm font-medium text-blue-700 dark:text-blue-300">New Task</span>
                            </button>
                            <button class="flex items-center justify-center space-x-2 p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors">
                                <i data-lucide="folder" class="w-5 h-5 text-blue-600 dark:text-blue-400"></i>
                                <span class="text-sm font-medium text-blue-700 dark:text-blue-300">New Project</span>
                            </button>
                            <button class="flex items-center justify-center space-x-2 p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors">
                                <i data-lucide="user-plus" class="w-5 h-5 text-blue-600 dark:text-blue-400"></i>
                                <span class="text-sm font-medium text-blue-700 dark:text-blue-300">Add Team Member</span>
                            </button>
                            <button class="flex items-center justify-center space-x-2 p-4 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors">
                                <i data-lucide="bar-chart" class="w-5 h-5 text-blue-600 dark:text-blue-400"></i>
                                <span class="text-sm font-medium text-blue-700 dark:text-blue-300">View Reports</span>
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <div id="mobileOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden hidden"></div>
    <script>
        lucide.createIcons();
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const mobileOverlay = document.getElementById('mobileOverlay');
        sidebarToggle?.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
            mobileOverlay.classList.toggle('hidden');
        });
        mobileOverlay?.addEventListener('click', () => {
            sidebar.classList.add('-translate-x-full');
            mobileOverlay.classList.add('hidden');
        });
        const darkModeToggle = document.getElementById('darkModeToggle');
        const html = document.documentElement;
        darkModeToggle?.addEventListener('click', () => {
            html.classList.toggle('dark');
            const icon = darkModeToggle.querySelector('i');
            if (html.classList.contains('dark')) {
                icon.setAttribute('data-lucide', 'sun');
            } else {
                icon.setAttribute('data-lucide', 'moon');
            }
            lucide.createIcons();
        });
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.querySelectorAll('.skeleton').forEach(el => {
                    el.classList.remove('skeleton');
                });
            }, 1000);
        });
    </script>
</body>
</html>